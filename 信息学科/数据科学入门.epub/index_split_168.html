<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>数据科学入门</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles1.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos732442" class="calibre_"><span class="calibre6"><span class="bold"> 23.10　查询优化 </span></span></p><p class="calibre_">回想一下找出所有对 SQL 感兴趣的用户的查询方法：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>SELECT users.name<br class="calibre12"/>FROM users<br class="calibre12"/>JOIN user_interests<br class="calibre12"/>ON users.user_id = user_interests.user_id<br class="calibre12"/>WHERE user_interests.interest = 'SQL'<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">在 NotQuiteABase 中，有（至少）两种不同的方法可以写这个查询。你可以在并表之前过滤表 <tt class="calibre7">user_interests</tt> ：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>user_interests \<br class="calibre12"/>    .where(lambda row: row["interest"] == "SQL") \<br class="calibre12"/>    .join(users) \<br class="calibre12"/>    .select(["name"])<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">或者你可以对并表的结果过滤：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>user_interests \<br class="calibre12"/>    .join(users) \<br class="calibre12"/>    .where(lambda row: row["interest"] == "SQL") \<br class="calibre12"/>    .select(["name"])<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">两种方法都可以获得相同的结果，但先过滤再并表的方式效率更高，因为这样可以在并表时操作更少的行。</p><p class="calibre_">在 SQL 中，你基本不用担心这个。你只需“声明”自己需要的结果，再把任务丢给查询引擎（和有效使用索引）来实现即可。</p><div class="mbp_pagebreak" id="calibre_pb_168"></div>
<div class="calibre5">本书由「<a href="https://epubw.com" class="calibre3">ePUBw.COM</a>」整理，<a href="https://epubw.com" class="calibre3">ePUBw.COM</a> 提供最新最全的优质电子书下载！！！</div></body></html>
