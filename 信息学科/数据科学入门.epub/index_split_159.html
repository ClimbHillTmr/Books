<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>数据科学入门</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles1.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos700521" class="calibre_"><span class="calibre6"><span class="bold"> 23.1　</span></span><span class="calibre6"><tt class="calibre7"><span class="bold">CREATE TABLE</span></tt></span><span class="calibre6"><span class="bold"> 与</span></span><span class="calibre6"><tt class="calibre7"><span class="bold">INSERT</span></tt></span><span class="calibre6"><span class="bold">  </span></span></p><p class="calibre_">关系型数据库是表（以及表之间的关系）的集合。表是行的简单集合，这与我们前面讨论过的矩阵不同。但是表有一个<span class="bold">固定的结构</span> ，包含列名与列的类型。</p><p class="calibre_">例如，假设有一个数据集 <tt class="calibre7">users</tt> ，对于每个用户它都包含三个属性 <tt class="calibre7">user\_id</tt> 、<tt class="calibre7">name</tt> 和 <tt class="calibre7">num\_friends</tt> ：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>users = [[0, "Hero", 0],<br class="calibre12"/>         [1, "Dunn", 2],<br class="calibre12"/>         [2, "Sue", 3],<br class="calibre12"/>         [3, "Chi", 3]]<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">在 SQL 中，我们可以这样创建表：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>CREATE TABLE users (<br class="calibre12"/>    user_id INT NOT NULL,<br class="calibre12"/>    name VARCHAR(200),<br class="calibre12"/>    num_friends INT);<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">注意，我们设定 <tt class="calibre7">user\_id</tt> 和 <tt class="calibre7">num\_friends</tt> 都必须是整数（且 <tt class="calibre7">user_id</tt> 不可以为 <tt class="calibre7">NULL</tt> ，因为 <tt class="calibre7">NULL</tt> 表示缺失值，类似于我们的 <tt class="calibre7">None</tt> ），并且名字必须是长度不大于 200 的字符串。NotQuiteABase 不考虑类型，但这里我们当作它会考虑。</p><blockquote class="calibre_14"><img src="images/00100.jpg" class="calibre_10"/> 　SQL 几乎不区分大小写和缩进形式。本书中的大小写与缩进风格是我的个人习惯。如果你开始学习 SQL，很可能会遇上不同风格的例子。</blockquote><p class="calibre_">你可以使用 <tt class="calibre7">INSERT</tt> 语句来插入行：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>INSERT INTO users (user_id, name, num_friends) VALUES (0, 'Hero', 0);<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">注意，SQL 语句需要用分号结尾，并且字符串需要用单引号括住。</p><p class="calibre_">在 NotQuiteABase 中，只要简单地设定列名就能创建一个表。要想插入一个行，你可以使用表的 <tt class="calibre7">insert()</tt> 方法，这个方法使用一个包含行值的列表，行值需按照表的列名顺序排列。</p><p class="calibre_">从本质上说，我们存储的每行都类似于一个从列名到值映射的字典。一个真正的数据库不会使用这么浪费空间的方式，但这样做可以使 NotQuiteABase 更易于处理：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>class Table:<br class="calibre12"/>    def __init__(self, columns):<br class="calibre12"/>        self.columns = columns<br class="calibre12"/>        self.rows = []<br class="calibre12"/><br class="calibre12"/>    def __repr__(self):<br class="calibre12"/>        """pretty representation of the table: columns then rows"""<br class="calibre12"/>        return str(self.columns) + "\n" + "\n".join(map(str, self.rows))<br class="calibre12"/><br class="calibre12"/>    def insert(self, row_values):<br class="calibre12"/>        if len(row_values) != len(self.columns):<br class="calibre12"/>            raise TypeError("wrong number of elements")<br class="calibre12"/>        row_dict = dict(zip(self.columns, row_values))<br class="calibre12"/>        self.rows.append(row_dict)<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">例如，我们可以创建：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>users = Table(["user_id", "name", "num_friends"])<br class="calibre12"/>users.insert([0, "Hero", 0])<br class="calibre12"/>users.insert([1, "Dunn", 2])<br class="calibre12"/>users.insert([2, "Sue", 3])<br class="calibre12"/>users.insert([3, "Chi", 3])<br class="calibre12"/>users.insert([4, "Thor", 3])<br class="calibre12"/>users.insert([5, "Clive", 2])<br class="calibre12"/>users.insert([6, "Hicks", 3])<br class="calibre12"/>users.insert([7, "Devin", 2])<br class="calibre12"/>users.insert([8, "Kate", 2])<br class="calibre12"/>users.insert([9, "Klein", 3])<br class="calibre12"/>users.insert([10, "Jen", 1])<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">如果你打印 <tt class="calibre7">users</tt> ，可以看到：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>['user_id', 'name', 'num_friends']<br class="calibre12"/>{'user_id': 0, 'name': 'Hero', 'num_friends': 0}<br class="calibre12"/>{'user_id': 1, 'name': 'Dunn', 'num_friends': 2}<br class="calibre12"/>{'user_id': 2, 'name': 'Sue', 'num_friends': 3}<br class="calibre12"/>...<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><div class="mbp_pagebreak" id="calibre_pb_159"></div>
<div class="calibre5">本书由「<a href="https://epubw.com" class="calibre3">ePUBw.COM</a>」整理，<a href="https://epubw.com" class="calibre3">ePUBw.COM</a> 提供最新最全的优质电子书下载！！！</div></body></html>
