<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>数据科学入门</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles1.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos249389" class="calibre_"><span class="calibre6"><span class="bold"> 7.5　案例：运行A/B测试 </span></span></p><p class="calibre_">你在 DataSciencester 的主要职责之一是经验值优化，这是个委婉的说法，其实就是设法让人点击广告。你的一个广告商针对数据科学家开发了一种新的能量饮料，广告部门的副总希望你帮助他在广告 A（“口味好”）和广告 B（“营养均衡”）之间进行选择。</p><p class="calibre_">作为一名<span class="bold">科学家</span> ，你得做一次<span class="bold">实验</span> ，对网站访问者随机放送不同的广告，并记录每个广告的点击数。</p><p class="calibre_">如果 1000 个看到广告 A 的人中有 990 个人点击广告，而 1000 个看到广告 B 的人中只有 10 个点击，你可以确认 A 是更棒的广告。但倘若区别并不如此分明，可以使用统计推断进行选择。</p><p class="calibre_">假设有 <span class="italic">N<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">A</span></span></small></sub>
</span> 个人看到广告 A，其中 <span class="italic">n<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">A</span></span></small></sub>
</span> 个人点击广告。每次广告浏览都是一次伯努利试验，其中 <span class="italic">p<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">A</span></span></small></sub>
</span> 是点击广告 A 的概率。然后（如果 <span class="italic">N<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">A</span></span></small></sub>
</span> 足够大。此处就足够大）我们知道 <span class="italic">n<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">A</span></span></small></sub>
</span> /<span class="italic">N<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">A</span></span></small></sub>
</span> 是近似服从正态分布的随机变量，其中均值为 <span class="italic">p<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">A</span></span></small></sub>
</span> ，标准差为 <img src="images/00104.jpg" class="calibre_69"/> 。同样，<span class="italic">n<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">B</span></span></small></sub>
</span> /<span class="italic">N<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">B</span></span></small></sub>
</span> 是近似服从正态分布的随机变量，均值为 <span class="italic">p<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">B</span></span></small></sub>
</span> ，标准差为 <img src="images/00149.jpg" class="calibre_70"/> ：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>def estimated_parameters(N, n):<br class="calibre12"/>    p = n / N<br class="calibre12"/>    sigma = math.sqrt(p * (1 - p) / N)<br class="calibre12"/>    return p, sigma<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">如果我们假设这两个正态分布互相独立（这个假设是合理的，因为每个伯努利试验也是独立的），那么它们的差也是正态分布的，其中均值为 <span class="italic">p<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">B</span></span></small></sub>
</span> - <span class="italic">p<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">A</span></span></small></sub>
</span> ，标准差为<img src="images/00034.jpg" class="calibre_71"/> 。</p><blockquote class="calibre_14"><img src="images/00100.jpg" class="calibre_10"/> 　这某种程度上有些欺骗性。只有在标准差已知的条件下数学推理才正确。我们从数据中估计参数，这意味着我们实际中应该用 <span class="italic">t</span> 分布。但如果数据集足够大，正态分布和 <span class="italic">t</span> 分布之间的差别可以忽略不计。</blockquote><p class="calibre_">这意味着我们可以检验 <span class="italic">p<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">A</span></span></small></sub>
</span> 和 <span class="italic">p<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">B</span></span></small></sub>
</span> 相等（即 <span class="italic">p<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">A</span></span></small></sub>
</span> -<span class="italic">p<sub class="calibre17"><small class="calibre9"><span class="calibre18"><span class="italic">B</span></span></small></sub>
</span> 等于零）这个<span class="bold">原假设</span> ，具体方式如下：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>def a_b_test_statistic(N_A, n_A, N_B, n_B):<br class="calibre12"/>    p_A, sigma_A = estimated_parameters(N_A, n_A)<br class="calibre12"/>    p_B, sigma_B = estimated_parameters(N_B, n_B)<br class="calibre12"/>    return (p_B - p_A) / math.sqrt(sigma_A ** 2 + sigma_B ** 2)<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">这应该近似一个标准正态分布。</p><p class="calibre_">比如，如果“口味好”的广告从 1000 次浏览中获得 200 次点击量，而“营养均衡”广告则从 1000 次浏览中获得 180 次点击量，则统计量等于：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>z = a_b_test_statistic(1000, 200, 1000, 180)   # -1.14<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">如果两个均值实际上相等，那么看到如此大的差异的概率为：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>two_sided_p_value(z)                           # 0.254<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">这计算出的数值很大，以至于你不可以得出有差距的结论。另一方面，如果“营养均衡”仅仅获得 150 次点击量，则：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>z = a_b_test_statistic(1000, 200, 1000, 150)   # -2.94<br class="calibre12"/>two_sided_p_value(z)                           # 0.003<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">这意味着如果广告的效果相同，那么你看到有明显差异的概率只有 0.003。</p><div class="mbp_pagebreak" id="calibre_pb_52"></div>
<div class="calibre5">本书由「<a href="https://epubw.com" class="calibre3">ePUBw.COM</a>」整理，<a href="https://epubw.com" class="calibre3">ePUBw.COM</a> 提供最新最全的优质电子书下载！！！</div></body></html>
