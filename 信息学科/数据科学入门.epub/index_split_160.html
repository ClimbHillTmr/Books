<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>数据科学入门</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles1.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos705373" class="calibre_15"><span class="calibre6"><span class="bold"> 23.2　</span></span><span class="calibre6"><tt class="calibre7"><span class="bold">UPDATE</span></tt></span><span class="calibre6"><span class="bold">  </span></span></p><p class="calibre_">有时候你需要更新已经存在于数据库中的数据。例如，如果 Dunn 结识了一位新朋友，你就得这样做：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>UPDATE users<br class="calibre12"/>SET num_friends = 3<br class="calibre12"/>WHERE user_id = 1;<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">其核心特征是：</p><div class="calibre_5"> </div><ul class="calibre_6"><li value="1" class="calibre_7"><p class="calibre_">哪张表需要更新</p></li><li value="2" class="calibre_8"><p class="calibre_">哪些行需要更新</p></li><li value="3" class="calibre_8"><p class="calibre_">哪些字段需要更新</p></li><li value="4" class="calibre_8"><p class="calibre_">新值应该是什么</p></li></ul><p class="calibre_">我们将为 NotQuiteABase 增加类似的 <tt class="calibre7">update</tt> 方法。第一个语句是 <tt class="calibre7">dict</tt> ，其键是需要更新的列，其值是这些字段的新值。第二个语句是 <tt class="calibre7">predicate</tt> ，它对需要更新的行返回 <tt class="calibre7">True</tt> ，否则返回 <tt class="calibre7">False</tt> ：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>def update(self, updates, predicate):<br class="calibre12"/>    for row in self.rows:<br class="calibre12"/>        if predicate(row):<br class="calibre12"/>            for column, new_value in updates.iteritems():<br class="calibre12"/>                row[column] = new_value<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">然后我们只需这样做：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>users.update({'num_friends' : 3},              # 设定 num_friends = 3<br class="calibre12"/>             lambda row: row['user_id'] == 1)  # 在user_id == 1的行中<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><div class="mbp_pagebreak" id="calibre_pb_160"></div>
<div class="calibre5">本书由「<a href="https://epubw.com" class="calibre3">ePUBw.COM</a>」整理，<a href="https://epubw.com" class="calibre3">ePUBw.COM</a> 提供最新最全的优质电子书下载！！！</div></body></html>
