<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>数据科学入门</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles1.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos707502" class="calibre_15"><span class="calibre6"><span class="bold"> 23.3　</span></span><span class="calibre6"><tt class="calibre7"><span class="bold">DELETE</span></tt></span><span class="calibre6"><span class="bold">  </span></span></p><p class="calibre_">SQL 有两种方法可以在表中删除行。一个比较有风险的方法是直接删掉表的每行：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>DELETE FROM users;<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">稍微安全一点的方法是增加 <tt class="calibre7">WHERE</tt> 子句，再删掉匹配某种条件的行：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>DELETE FROM users WHERE user_id = 1;<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">在表中增加这个功能很容易：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>    def delete(self, predicate=lambda row: True):<br class="calibre12"/>        """delete all rows matching predicate<br class="calibre12"/>        or all rows if no predicate supplied"""<br class="calibre12"/>        self.rows = [row for row in self.rows if not(predicate(row))<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">如果你提供了一个 <tt class="calibre7">predicate</tt> 函数（即 <tt class="calibre7">WHERE</tt> 子句），它会仅删掉那些满足条件的行。如果你不提供任何 <tt class="calibre7">predicate</tt> 函数，默认的判定就返回真值 <tt class="calibre7">True</tt> ，然后删掉每一行。</p><p class="calibre_">例如：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>users.delete(lambda row: row["user_id"] == 1)  # 删掉user_id == 1的行<br class="calibre12"/>users.delete()                                 # 删掉每一行<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><div class="mbp_pagebreak" id="calibre_pb_161"></div>
<div class="calibre5">本书由「<a href="https://epubw.com" class="calibre3">ePUBw.COM</a>」整理，<a href="https://epubw.com" class="calibre3">ePUBw.COM</a> 提供最新最全的优质电子书下载！！！</div></body></html>
