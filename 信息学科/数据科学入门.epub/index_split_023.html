<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>数据科学入门</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles1.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos140826" class="calibre_"><span class="calibre6"><span class="bold"> 3.2　条形图 </span></span></p><p class="calibre_">如果你想展示某些<span class="bold">离散</span> 的项目集合中的数量是如何变化的，可以使用条形图。比如，图 3-2 显示了几部电影所获得的奥斯卡金像奖的数目：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>movies = ["Annie Hall", "Ben-Hur", "Casablanca", "Gandhi", "West Side Story"]<br class="calibre12"/>num_oscars = [5, 11, 3, 8, 10]<br class="calibre12"/><br class="calibre12"/># 条形的默认宽度是0.8，因此我们对左侧坐标加上0.1<br class="calibre12"/># 这样每个条形就被放置在中心了<br class="calibre12"/>xs = [i + 0.1 for i, _ in enumerate(movies)]<br class="calibre12"/><br class="calibre12"/># 使用左侧x坐标[xs]和高度[num_oscars]画条形图<br class="calibre12"/>plt.bar(xs, num_oscars)<br class="calibre12"/><br class="calibre12"/>plt.ylabel("所获奥斯卡金像奖数量")<br class="calibre12"/>plt.title("我最喜爱的电影")<br class="calibre12"/><br class="calibre12"/># 使用电影的名字标记x轴，位置在x轴上条形的中心<br class="calibre12"/>plt.xticks([i + 0.5 for i, _ in enumerate(movies)], movies)<br class="calibre12"/><br class="calibre12"/>plt.show()<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_19"><img src="images/00078.jpg" class="calibre_21"/>
</p><p class="calibre_">
<span class="bold">图 3-2：一个简单的条形图</span>
</p><p class="calibre_">条形图也可以用来绘制拥有大量数值取值的变量直方图，以此来探索这些取值是如何<span class="bold">分布</span> 的，如图 3-3 所示。</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>grades = [83,95,91,87,70,0,85,82,100,67,73,77,0]<br class="calibre12"/>decile = lambda grade: grade // 10 * 10<br class="calibre12"/>histogram = Counter(decile(grade) for grade in grades)<br class="calibre12"/><br class="calibre12"/>plt.bar([x - 4 for x in histogram.keys()], # 每个条形向左侧移动4个单位<br class="calibre12"/>        histogram.values(),                # 给每个条形设置正确的高度<br class="calibre12"/>        8)                                 # 每个条形的宽度设置为8<br class="calibre12"/><br class="calibre12"/>plt.axis([-5, 105, 0, 5])                  # x轴取值从-5到105<br class="calibre12"/>                                           # y轴取值0到5<br class="calibre12"/><br class="calibre12"/>plt.xticks([10 * i for i in range(11)])    # x轴标记为0，10，...，100<br class="calibre12"/>plt.xlabel("十分相")<br class="calibre12"/>plt.ylabel("学生数")<br class="calibre12"/>plt.title("考试分数分布图")<br class="calibre12"/>plt.show()<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_19"><img src="images/00088.jpg" class="calibre_22"/>
</p><p class="calibre_">
<span class="bold">图 3-3：为直方图使用条形图</span>
</p><p class="calibre_">
<tt class="calibre7">plt.bar</tt> 的第三个参数指定了条形的宽度，在这里我们选择宽度为 8（这样就在各个条形之间留出了小的间隔，因为 <span class="italic">x</span> 轴是以刻度 10 做标记的），而且把每个条形向左移了 4 个宽度。这样一来，（比如说）“80”这个条形的左边在 76，而右边在 84，因此它的中心在 80。</p><p class="calibre_">对 <tt class="calibre7">plt.axis</tt> 的调用表明我们希望 <span class="italic">x</span> 轴的范围是 -5~105（以使“0”到“100”这些条形可以完全显示），并且 <span class="italic">y</span> 轴的范围应限定在 0~5 之间。对 <tt class="calibre7">plt.xticks</tt> 的调用把 <span class="italic">x</span> 轴的刻度放在 0、10、20、……、100 这些位置。</p><p class="calibre_">在使用 <tt class="calibre7">plt.axis()</tt> 时要谨慎。在创建条形图时，<span class="italic">y</span> 轴不从 0 开始是一种特别不好的形式，因为这很容易误导人（见图 3-4）：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>mentions = [500, 505]<br class="calibre12"/>years = [2013, 2014]<br class="calibre12"/><br class="calibre12"/>plt.bar([2012.6, 2013.6], mentions, 0.8)<br class="calibre12"/>plt.xticks(years)<br class="calibre12"/>plt.ylabel("听到有人提及‘数据科学’的次数")<br class="calibre12"/><br class="calibre12"/># 如果不这么做，matplotlib会把x轴的刻度标记为0和1<br class="calibre12"/># 然后会在角上加上+2.013e3（糟糕的matplotlib操作！）<br class="calibre12"/>plt.ticklabel_format(useOffset=False)<br class="calibre12"/><br class="calibre12"/># 这会误导y轴只显示500以上的部分<br class="calibre12"/>plt.axis([2012.5,2014.5,499,506])<br class="calibre12"/>plt.title("快看如此'巨大'的增长！")<br class="calibre12"/>plt.show()<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_19"><img src="images/00093.jpg" class="calibre_23"/>
</p><p class="calibre_">
<span class="bold">图 3-4：一个有误导性 </span><span class="italic"><span class="bold">y</span></span><span class="bold"> 轴的条形图</span>
</p><p class="calibre_">在图 3-5 中，我们使用了一种更合理的轴，这样它看起来就不那么异常了：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>plt.axis([2012.5,2014.5,0,550])<br class="calibre12"/>plt.title("增长不那么巨大了")<br class="calibre12"/>plt.show()<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_19"><img src="images/00103.jpg" class="calibre_24"/>
</p><p class="calibre_">
<span class="bold">图 3-5：</span><span class="italic"><span class="bold">y</span></span><span class="bold"> 轴正常的同一个条形图</span>
</p><div class="mbp_pagebreak" id="calibre_pb_23"></div>
<div class="calibre5">本书由「<a href="https://epubw.com" class="calibre3">ePUBw.COM</a>」整理，<a href="https://epubw.com" class="calibre3">ePUBw.COM</a> 提供最新最全的优质电子书下载！！！</div></body></html>
