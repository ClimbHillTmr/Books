<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>数据科学入门</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles1.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos357403" class="calibre_"><span class="calibre6"><span class="bold"> 10.4　数据调整 </span></span></p><p class="calibre_">许多技术对数据<span class="bold">单位</span> （scale）敏感。比如，假设你有一个包括数百名数据科学家的身高和体重的数据集，并且需要创建体型大小的<span class="bold">聚类</span> （cluster）。</p><p class="calibre_">直观上讲，我们用聚类表示相近的点，这意味着我们需要某种点距离的概念。我们知道有欧几里得距离函数 <tt class="calibre7">distance</tt> ，所以自然地，一种方法是将数据对 (height, weight) 视为二维空间中的点。考虑表 10-1 中列出的观测对象。</p><p class="calibre_">
<span class="bold">表10-1：身高和体重</span>
</p><p class="calibre13"> </p><table border="1" valign="top" class="calibre_37"><tr valign="top" class="calibre14"><th valign="top" class="calibre15"><span class="calibre11"><span class="bold">  </span></span><p class="calibre_38"><span class="calibre11"><span class="bold">观测对象 </span></span></p></th><th valign="top" class="calibre15"><span class="calibre11"><span class="bold">  </span></span><p class="calibre_38"><span class="calibre11"><span class="bold">身高（英寸） </span></span></p></th><th valign="top" class="calibre15"><span class="calibre11"><span class="bold">  </span></span><p class="calibre_38"><span class="calibre11"><span class="bold">身高（厘米） </span></span></p></th><th valign="top" class="calibre15"><span class="calibre11"><span class="bold">  </span></span><p class="calibre_38"><span class="calibre11"><span class="bold">体重（磅） </span></span></p></th></tr><tr valign="top" class="calibre14"><td class="calibre16"><span class="calibre11">  </span><p class="calibre_39"><span class="calibre11">A </span></p></td><td class="calibre16"><span class="calibre11">  </span><p class="calibre_39"><span class="calibre11">63 </span></p></td><td class="calibre16"><span class="calibre11">  </span><p class="calibre_39"><span class="calibre11">160 </span></p></td><td class="calibre16"><span class="calibre11">  </span><p class="calibre_39"><span class="calibre11">150 </span></p></td></tr><tr valign="top" class="calibre_40"><td class="calibre16"><span class="calibre11">  </span><p class="calibre_39"><span class="calibre11">B </span></p></td><td class="calibre16"><span class="calibre11">  </span><p class="calibre_39"><span class="calibre11">67 </span></p></td><td class="calibre16"><span class="calibre11">  </span><p class="calibre_39"><span class="calibre11">170.2 </span></p></td><td class="calibre16"><span class="calibre11">  </span><p class="calibre_39"><span class="calibre11">160 </span></p></td></tr><tr valign="top" class="calibre14"><td class="calibre16"><span class="calibre11">  </span><p class="calibre_39"><span class="calibre11">C </span></p></td><td class="calibre16"><span class="calibre11">  </span><p class="calibre_39"><span class="calibre11">70 </span></p></td><td class="calibre16"><span class="calibre11">  </span><p class="calibre_39"><span class="calibre11">177.8 </span></p></td><td class="calibre16"><span class="calibre11">  </span><p class="calibre_39"><span class="calibre11">171 </span></p></td></tr></table><p class="calibre_">如果我们用英寸作为身高的单位，那么 B 最近的邻居是 A：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>a_to_b = distance([63, 150], [67, 160])        # 10.77<br class="calibre12"/>a_to_c = distance([63, 150], [70, 171])        # 22.14<br class="calibre12"/>b_to_c = distance([67, 160], [70, 171])        # 11.40<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">但是，如果用厘米作为单位，那么 B 最近的邻居变成了 C：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>a_to_b = distance([160, 150], [170.2, 160])   # 14.28<br class="calibre12"/>a_to_c = distance([160, 150], [177.8, 171])   # 27.53<br class="calibre12"/>b_to_c = distance([170.2, 160], [177.8, 171]) # 13.37<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">显然，如果单位变化导致结果发生这样的变化，那肯定是有问题的。因此，如果不同的维度之间不可比较，就需要对数据进行<span class="bold">调整</span> （rescale），以使得每个维度的均值为 0，标准差为 1。这种转换有效地摆脱了单位带来的问题，将每个维度转化为“与均值的标准差”。</p><p class="calibre_">首先，我们需要对每列计算均值和标准差：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>def scale(data_matrix):<br class="calibre12"/>    """returns the means and standard deviations of each column"""<br class="calibre12"/>    num_rows, num_cols = shape(data_matrix)<br class="calibre12"/>    means = [mean(get_column(data_matrix,j))<br class="calibre12"/>             for j in range(num_cols)]<br class="calibre12"/>    stdevs = [standard_deviation(get_column(data_matrix,j))<br class="calibre12"/>              for j in range(num_cols)]<br class="calibre12"/>    return means, stdevs<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">然后用结果创建新的数据矩阵：</p><blockquote class="calibre_14"><span class="calibre11"><tt class="calibre7"><br class="calibre12"/>def rescale(data_matrix):<br class="calibre12"/>    """rescales the input data so that each column<br class="calibre12"/>    has mean 0 and standard deviation 1<br class="calibre12"/>    leaves alone columns with no deviation"""<br class="calibre12"/>    means, stdevs = scale(data_matrix)<br class="calibre12"/><br class="calibre12"/>    def rescaled(i, j):<br class="calibre12"/>        if stdevs[j] &gt; 0:<br class="calibre12"/>            return (data_matrix[i][j] - means[j]) / stdevs[j]<br class="calibre12"/>        else:<br class="calibre12"/>            return data_matrix[i][j]<br class="calibre12"/><br class="calibre12"/>    num_rows, num_cols = shape(data_matrix)<br class="calibre12"/>    return make_matrix(num_rows, num_cols, rescaled)<br class="calibre12"/><br class="calibre12"/><br class="calibre12"/><br class="calibre12"/></tt></span></blockquote><p class="calibre_15">一如既往地，你需要运用你的判断力。如果你拿到一个由身高和体重组成的巨大的数据集，需要将其过滤为仅由身高在 69.5 英寸至 70.5 英寸之间的人组成。很有可能（取决于你希望回答的问题）剩余的变差仅仅是<span class="bold">噪声</span> （noise），但你也许并不希望将其标准差与其他维度的标准差等而视之。</p><div class="mbp_pagebreak" id="calibre_pb_74"></div>
<div class="calibre5">本书由「<a href="https://epubw.com" class="calibre3">ePUBw.COM</a>」整理，<a href="https://epubw.com" class="calibre3">ePUBw.COM</a> 提供最新最全的优质电子书下载！！！</div></body></html>
